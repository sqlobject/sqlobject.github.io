<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
<title></title>
    <link href="layout.css" type="text/css" rel="stylesheet">
  </head>
  <body>
    <div id="page">
      <h1 class="doc-title"><a></a></h1>
      <div id="navcontainer">
		    <ul id="navlist">
          <li class="pagenav">
            <ul>
              <li class="page_item">
                <a href="index.html" title="Project Home / Index">SQLObject</a>
              </li>
              <li class="page_item">
                <a href="module-index.html" title="sqlobject package and module reference">Modules</a>
              </li>
              <li>
                <a href="community.html" title="Mailing List">Discuss</a>
              </li>
	      <li>
	        <a href="SQLObject.html">Documentation</a>
	      </li>
            </ul>
          </li>
        </ul>
      </div>
      <hr>
      <div id="content"><div class="rst-doc">
  <h1 class="pudge-member-page-heading"></h1>
  <div class="line-block">
<div class="line">> SomeTable.select(SomeTable.q.Foo > 30)</div>
<div class="line">></div>
<div class="line">> Why doesn't the inner parameter, SomeTable.q.Foo > 30, get evaluated to some boolean value?</div>
</div>
<p>.q is an object that returns special attributes of type
sqlbuilder.SQLExpression. SQLExpression is a special class that overrides
almost all Python magic methods and upon any operation instead of
evaluating it constructs another instance of SQLExpression that remembers
what operation it has to do. A kind of symbolic algebra. Example:</p>
<blockquote>
SQLExpression("foo") > 30</blockquote>
<p>produces SQLExpression("foo", ">", 30) (well, it really produces
SQLExpression(SQLExpression("foo")...))</p>
<div class="line-block">
<div class="line">> How does the select(...) method know what to do?</div>
</div>
<p>In short, .select() recursively evaluates the top-most SQLExpression to a
string:</p>
<blockquote>
SQLExpression("foo", ">", 30) => "foo > 30"</blockquote>
<p>and passes the result as a string to the SQL backend.</p>
<p>The longer but more detailed and correct explanation is that .select()
produces an instance of SelectResults class that upon being iterated over
produces an instance of Iteration class that upon calling its .next()
method (it is iterator!) construct the SQL query string, passes it to the
backend, fetches the results, wraps every row as SQLObject instance and
passes them back to the user.</p>
<p>For the details of the implementation see sqlobject/main.py for SQLObject,
sqlobject/sqlbuilder.py for SQLExpression, sqlobject/dbconnection.py for
DBConnection class (that constructs the query strings) and Iteration class,
and different subdirectories of sqlobject for concrete implementations of
connection classes - different backends require different query strings.</p>
<a href="http://sourceforge.net/projects/sqlobject" class="reference external image-reference"><div align="center" class="align-center"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=74338&amp;type=10" alt="Get SQLObject at SourceForge.net. Fast, secure and Free Open Source software downloads" style="width: 80px; height: 15px;" class="noborder align-center"></div>
</a>
</div></div>
      <div id="footer">
        <p style="float: left;">
          built with 
          <a href="http://lesscode.org/projects/pudge/">pudge/0.1.3</a> |
		      original design by 
          <a href="http://blog.ratterobert.com/">ratter / robert</a>
	      </p>
        <div>
        <br> <!--
        <a name="search">
          <form method="get" id="searchform" 
                action="http://lesscode.org/blog/index.php">
            <div>
              <input type="text" value="" name="s" id="s" />
              <input type="submit" id="searchsubmit" value="Search" />
            </div>
          </form>
        </a> -->
        <br>
        </div>
      </div>
    </div>
  </body>
</html>