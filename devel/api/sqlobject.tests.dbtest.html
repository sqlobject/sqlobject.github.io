

<!doctype html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>sqlobject.tests.dbtest module &#8212; SQLObject 3.2.0a0 documentation</title>
    
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2.0a0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/bizstyle.js"></script>
    <link rel="top" title="SQLObject 3.2.0a0 documentation" href="../index.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script type="text/javascript" src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SQLObject 3.2.0a0 documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/api/sqlobject.tests.dbtest.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-sqlobject.tests.dbtest">
<span id="sqlobject-tests-dbtest-module"></span><h1>sqlobject.tests.dbtest module<a class="headerlink" href="#module-sqlobject.tests.dbtest" title="Permalink to this headline">¶</a></h1>
<p>The framework for making database tests.</p>
<dl class="class">
<dt id="sqlobject.tests.dbtest.Dummy">
<em class="property">class </em><code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">Dummy</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#Dummy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.Dummy" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Used for creating fake objects; a really poor &#8216;mock object&#8217;.</p>
</dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.deprecated_module">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">deprecated_module</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#deprecated_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.deprecated_module" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.getConnection">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">getConnection</code><span class="sig-paren">(</span><em>**kw</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#getConnection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.getConnection" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.getConnectionURI">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">getConnectionURI</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#getConnectionURI"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.getConnectionURI" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.inserts">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">inserts</code><span class="sig-paren">(</span><em>cls</em>, <em>data</em>, <em>schema=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#inserts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.inserts" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a bunch of rows.</p>
<p>You can use it like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">inserts</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="p">[{</span><span class="s1">&#39;fname&#39;</span><span class="p">:</span> <span class="s1">&#39;blah&#39;</span><span class="p">,</span> <span class="s1">&#39;lname&#39;</span><span class="p">:</span> <span class="s1">&#39;doe&#39;</span><span class="p">},</span> <span class="o">...</span><span class="p">])</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">inserts</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;blah&#39;</span><span class="p">,</span> <span class="s1">&#39;doe&#39;</span><span class="p">)],</span> <span class="n">schema</span><span class="o">=</span>
        <span class="p">[</span><span class="s1">&#39;fname&#39;</span><span class="p">,</span> <span class="s1">&#39;lname&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>If you give a single string for the <cite>schema</cite> then it&#8217;ll split
that string to get the list of column names.</p>
</dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.raises">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">raises</code><span class="sig-paren">(</span><em>expected_exception</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/python.html#raises"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.raises" title="Permalink to this definition">¶</a></dt>
<dd><p>Assert that a code block/function call raises <code class="docutils literal"><span class="pre">expected_exception</span></code>
and raise a failure exception otherwise.</p>
<p>This helper produces a <code class="docutils literal"><span class="pre">ExceptionInfo()</span></code> object (see below).</p>
<p>If using Python 2.5 or above, you may use this function as a
context manager:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">):</span>
<span class="gp">... </span>   <span class="mi">1</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.10.</span></p>
</div>
<p>In the context manager form you may use the keyword argument
<code class="docutils literal"><span class="pre">message</span></code> to specify a custom failure message:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Expecting ZeroDivisionError&quot;</span><span class="p">):</span>
<span class="gp">... </span>   <span class="k">pass</span>
<span class="gp">... </span><span class="n">Failed</span><span class="p">:</span> <span class="n">Expecting</span> <span class="ne">ZeroDivisionError</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When using <code class="docutils literal"><span class="pre">pytest.raises</span></code> as a context manager, it&#8217;s worthwhile to
note that normal context manager rules apply and that the exception
raised <em>must</em> be the final line in the scope of the context manager.
Lines of code after that, within the scope of the context manager will
not be executed. For example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">raises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="go">        assert 1 == 1  # this will execute as expected</span>
<span class="go">        raise OSError(errno.EEXISTS, &#39;directory exists&#39;)</span>
<span class="go">        assert exc_info.value.errno == errno.EEXISTS  # this will not execute</span>
</pre></div>
</div>
<p>Instead, the following approach must be taken (note the difference in
scope):</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">raises</span><span class="p">(</span><span class="ne">OSError</span><span class="p">)</span> <span class="k">as</span> <span class="n">exc_info</span><span class="p">:</span>
<span class="go">        assert 1 == 1  # this will execute as expected</span>
<span class="go">        raise OSError(errno.EEXISTS, &#39;directory exists&#39;)</span>

<span class="go">    assert exc_info.value.errno == errno.EEXISTS  # this will now execute</span>
</pre></div>
</div>
</div>
<p>Or you can specify a callable by passing a to-be-called lambda:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="mi">1</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>or you can specify an arbitrary callable with arguments:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="k">return</span> <span class="mi">1</span><span class="o">/</span><span class="n">x</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<p>A third possibility is to use a string to be executed:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">raises</span><span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="s2">&quot;f(0)&quot;</span><span class="p">)</span>
<span class="go">&lt;ExceptionInfo ...&gt;</span>
</pre></div>
</div>
<dl class="class">
<dt id="_pytest._code.ExceptionInfo">
<em class="property">class </em><code class="descclassname">_pytest._code.</code><code class="descname">ExceptionInfo</code><span class="sig-paren">(</span><em>tup=None</em>, <em>exprinfo=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#_pytest._code.ExceptionInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>wraps sys.exc_info() objects and offers
help for navigating the traceback.</p>
<dl class="method">
<dt id="_pytest._code.ExceptionInfo.errisinstance">
<code class="descname">errisinstance</code><span class="sig-paren">(</span><em>exc</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.errisinstance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#_pytest._code.ExceptionInfo.errisinstance" title="Permalink to this definition">¶</a></dt>
<dd><p>return True if the exception is an instance of exc</p>
</dd></dl>

<dl class="method">
<dt id="_pytest._code.ExceptionInfo.exconly">
<code class="descname">exconly</code><span class="sig-paren">(</span><em>tryshort=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.exconly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#_pytest._code.ExceptionInfo.exconly" title="Permalink to this definition">¶</a></dt>
<dd><p>return the exception as a string</p>
<p>when &#8216;tryshort&#8217; resolves to True, and the exception is a
_pytest._code._AssertionError, only the actual exception part of
the exception representation is returned (so &#8216;AssertionError: &#8216; is
removed from the beginning)</p>
</dd></dl>

<dl class="method">
<dt id="_pytest._code.ExceptionInfo.getrepr">
<code class="descname">getrepr</code><span class="sig-paren">(</span><em>showlocals=False</em>, <em>style='long'</em>, <em>abspath=False</em>, <em>tbfilter=True</em>, <em>funcargs=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.getrepr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#_pytest._code.ExceptionInfo.getrepr" title="Permalink to this definition">¶</a></dt>
<dd><p>return str()able representation of this exception info.
showlocals: show locals per traceback entry
style: long|short|no|native traceback style
tbfilter: hide entries (where __tracebackhide__ is true)</p>
<p>in case of style==native, tbfilter and showlocals is ignored.</p>
</dd></dl>

<dl class="method">
<dt id="_pytest._code.ExceptionInfo.match">
<code class="descname">match</code><span class="sig-paren">(</span><em>regexp</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/_pytest/_code/code.html#ExceptionInfo.match"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#_pytest._code.ExceptionInfo.match" title="Permalink to this definition">¶</a></dt>
<dd><p>Match the regular expression &#8216;regexp&#8217; on the string representation of
the exception. If it matches then True is returned (so that it is
possible to write &#8216;assert excinfo.match()&#8217;). If it doesn&#8217;t match an
AssertionError is raised.</p>
</dd></dl>

<dl class="attribute">
<dt id="_pytest._code.ExceptionInfo.tb">
<code class="descname">tb</code><em class="property"> = None</em><a class="headerlink" href="#_pytest._code.ExceptionInfo.tb" title="Permalink to this definition">¶</a></dt>
<dd><p>the exception raw traceback</p>
</dd></dl>

<dl class="attribute">
<dt id="_pytest._code.ExceptionInfo.traceback">
<code class="descname">traceback</code><em class="property"> = None</em><a class="headerlink" href="#_pytest._code.ExceptionInfo.traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>the exception traceback (_pytest._code.Traceback instance)</p>
</dd></dl>

<dl class="attribute">
<dt id="_pytest._code.ExceptionInfo.type">
<code class="descname">type</code><em class="property"> = None</em><a class="headerlink" href="#_pytest._code.ExceptionInfo.type" title="Permalink to this definition">¶</a></dt>
<dd><p>the exception class</p>
</dd></dl>

<dl class="attribute">
<dt id="_pytest._code.ExceptionInfo.typename">
<code class="descname">typename</code><em class="property"> = None</em><a class="headerlink" href="#_pytest._code.ExceptionInfo.typename" title="Permalink to this definition">¶</a></dt>
<dd><p>the exception type name</p>
</dd></dl>

<dl class="attribute">
<dt id="_pytest._code.ExceptionInfo.value">
<code class="descname">value</code><em class="property"> = None</em><a class="headerlink" href="#_pytest._code.ExceptionInfo.value" title="Permalink to this definition">¶</a></dt>
<dd><p>the exception instance</p>
</dd></dl>

</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Similar to caught exception objects in Python, explicitly clearing
local references to returned <code class="docutils literal"><span class="pre">ExceptionInfo</span></code> objects can
help the Python interpreter speed up its garbage collection.</p>
<p class="last">Clearing those references breaks a reference cycle
(<code class="docutils literal"><span class="pre">ExceptionInfo</span></code> &#8211;&gt; caught exception &#8211;&gt; frame stack raising
the exception &#8211;&gt; current frame stack &#8211;&gt; local variables &#8211;&gt;
<code class="docutils literal"><span class="pre">ExceptionInfo</span></code>) which makes Python keep all objects referenced
from that cycle (including all local variables in the current
frame) alive until the next cyclic garbage collection run. See the
official Python <code class="docutils literal"><span class="pre">try</span></code> statement documentation for more detailed
information.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.setupClass">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">setupClass</code><span class="sig-paren">(</span><em>soClasses</em>, <em>force=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#setupClass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.setupClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes sure the classes have a corresponding and correct table.
This won&#8217;t recreate the table if it already exists.  It will check
that the table is properly defined (in case you change your table
definition).</p>
<p>You can provide a single class or a list of classes; if a list
then classes will be created in the order you provide, and
destroyed in the opposite order.  So if class A depends on class
B, then do setupClass([B, A]) and B won&#8217;t be destroyed or cleared
until after A is destroyed or cleared.</p>
<p>If force is true, then the database will be recreated no matter
what.</p>
</dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.setupCyclicClasses">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">setupCyclicClasses</code><span class="sig-paren">(</span><em>*classes</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#setupCyclicClasses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.setupCyclicClasses" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.setupLogging">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">setupLogging</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#setupLogging"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.setupLogging" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.setup_module">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">setup_module</code><span class="sig-paren">(</span><em>mod</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#setup_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.setup_module" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.supports">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">supports</code><span class="sig-paren">(</span><em>feature</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#supports"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.supports" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="sqlobject.tests.dbtest.teardown_module">
<code class="descclassname">sqlobject.tests.dbtest.</code><code class="descname">teardown_module</code><span class="sig-paren">(</span><em>mod=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/sqlobject/tests/dbtest.html#teardown_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#sqlobject.tests.dbtest.teardown_module" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">SQLObject 3.2.0a0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2004-2016, Ian Bicking and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>